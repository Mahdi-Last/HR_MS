<UserControl x:Class="HR_MS.MVVM.Views.Users.UsersView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:HR_MS.MVVM.Views.Users"
              
             mc:Ignorable="d" 
             xmlns:vm="clr-namespace:HR_MS.MVVM.ViewModels.Users"
             xmlns:icon="http://metro.mahapps.com/winfx/xaml/iconpacks"
             d:DesignHeight="450" d:DesignWidth="800">

    <UserControl.DataContext>
        <vm:UsersViewModel/>
    </UserControl.DataContext>
    
    <StackPanel>
        <TextBlock Text="Users" Foreground="#537188"  FontSize="30" FontWeight="Bold"
                                       DockPanel.Dock="Top" TextAlignment="Center" />

        <Grid Margin="0,0,0,15">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Add New User (Right aligned) -->
            <Button Command="{Binding AddUserCommand}" Grid.Column="1"
            Style="{StaticResource pagingButton}">
                <StackPanel Orientation="Horizontal">
                    <icon:PackIconMaterial Kind="Plus"
                                   Style="{StaticResource menuButtonIcon}"
                                   Margin="10,5"/>
                    <TextBlock Text="Add User"
                       VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
        </Grid>

        <DataGrid ItemsSource="{Binding Users}" SelectedItem="{Binding SelectedUser}" Style="{DynamicResource DataGridStyle1}" CellStyle="{DynamicResource DataGridCellStyle1}" IsReadOnly="True"
                              RowStyle="{DynamicResource DataGridRowStyle1}" Grid.Row="5" AutoGenerateColumns="False" MaxHeight="380">
            <!--Data-->
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding UserID}" Header="User ID"/>
                <DataGridTextColumn Binding="{Binding PersonID}" Header="Person ID"/>
                <DataGridTextColumn Binding="{Binding Person.FullName}" Header="Full Name"/>
                <DataGridTextColumn Binding="{Binding Person.Gender}" Header="Gender"/>
                <DataGridTextColumn Binding="{Binding Username}" Header="Username"/>

                <DataGridTemplateColumn Width="100">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Button Command="{Binding DataContext.EditUserCommand,RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" Style="{StaticResource actionButton}"  Background="#3a9bdc">
                                    <icon:PackIconMaterial Kind="AccountEdit" Style="{StaticResource actionButtonIcon}"/>
                                </Button>
                                <Button Command="{Binding DataContext.DeleteUserCommand,RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" Style="{StaticResource actionButton}"  Background="#df2c14">
                                    <icon:PackIconMaterial Kind="Delete" Style="{StaticResource actionButtonIcon}"/>
                                </Button>
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

    </StackPanel>
</UserControl>
